{"version":3,"file":"105.18314c339246c528e7ef.js","mappings":"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","sources":["webpack://babylonjs-fluid-rendering/./src/assets/scenes/simple_round_table.glb","webpack://babylonjs-fluid-rendering/./src/scenes/fluidSimulationDemoGlass.ts"],"sourcesContent":["export default __webpack_public_path__ + \"370c162a33a228937af8f45b74b949f4.glb\";","import * as BABYLON from \"@babylonjs/core\";\n\nimport { FluidSimulationDemoBase } from \"./fluidSimulationDemoBase\";\n\n// Table from YouniqueÄªdeaStudio (https://sketchfab.com/3d-models/simple-round-table-obj-6083c7dd80034ed5a6425a5fe7bcdf9a)\nimport tableScene from \"../assets/scenes/simple_round_table.glb\";\n\nexport class FluidSimulationDemoGlass extends FluidSimulationDemoBase {\n    private _boxMesh: BABYLON.Nullable<BABYLON.Mesh>;\n    private _boxMaterial: BABYLON.Nullable<BABYLON.PBRMaterial>;\n    private _cylMesh: BABYLON.Nullable<BABYLON.Mesh>;\n    private _cylMeshOfst: BABYLON.Vector3;\n    private _footMesh: BABYLON.Nullable<BABYLON.Mesh>;\n    private _footMeshOfst: BABYLON.Vector3;\n    private _sceneRenderObserver: BABYLON.Nullable<\n        BABYLON.Observer<BABYLON.Scene>\n    >;\n\n    constructor(scene: BABYLON.Scene) {\n        super(scene);\n\n        this._environmentFile = \"Country\";\n        this._sceneRenderObserver = null;\n        this._boxMesh = null;\n        this._boxMaterial = null;\n        this._cylMesh = null;\n        this._footMesh = null;\n\n        this.addCollisionVerticalCylinder(\n            new BABYLON.Vector3(0.0, -(1.9 + 0.04 - 0.2 + 0.15), 0.0),\n            new BABYLON.Vector3(0, 0, 0),\n            2.2,\n            0.12,\n            16,\n            null,\n            0.3,\n            true\n        );\n\n        this.addCollisionPlane(new BABYLON.Vector3(0, 1, 0), 6, 0.3);\n\n        this.addCollisionCutHollowSphere(\n            new BABYLON.Vector3(0.0, 0.2, 0.0),\n            new BABYLON.Vector3(0, 0, 0),\n            0.5,\n            0.2,\n            0.02,\n            16,\n            new BABYLON.Vector3(0, 1, 0)\n        );\n\n        this._footMeshOfst = new BABYLON.Vector3(0, -1.9, 0);\n        this.addCollisionVerticalCylinder(\n            new BABYLON.Vector3(0.0, -1.7 - 0.04 / 2, 0.0),\n            new BABYLON.Vector3(0, 0, 0),\n            0.4,\n            0.04,\n            16,\n            null,\n            0.6\n        );\n\n        this._cylMeshOfst = new BABYLON.Vector3(0, -1.2, 0);\n        this.addCollisionVerticalCylinder(\n            new BABYLON.Vector3(0.0, -1.0, 0.0),\n            new BABYLON.Vector3(0, 0, 0),\n            0.05,\n            1.4,\n            16,\n            null,\n            0.6\n        );\n    }\n\n    public async _run() {\n        // Get collision meshes\n        this._boxMesh = this._collisionObjects[2][0];\n        this._footMesh = this._collisionObjects[3][0];\n        this._cylMesh = this._collisionObjects[4][0];\n\n        // Reset camera\n        const camera =\n            this._scene.activeCameras?.[0] ?? this._scene.activeCamera;\n\n        if (camera) {\n            (camera as BABYLON.ArcRotateCamera).alpha = 3.09;\n            (camera as BABYLON.ArcRotateCamera).beta = 1.41;\n            (camera as BABYLON.ArcRotateCamera).radius = 6.42;\n        }\n\n        // Simulation parameters\n        this._fluidRenderObject.object.particleSize = 0.08;\n        this._fluidRenderObject.targetRenderer.fluidColor = new BABYLON.Color3(\n            251 / 255,\n            218 / 255,\n            218 / 255\n        );\n\n        this._fluidSim!.smoothingRadius = 0.04;\n        this._fluidSim!.densityReference = 20000;\n        this._fluidSim!.pressureConstant = 4;\n        this._fluidSim!.viscosity = 0.01;\n        this._fluidSim!.maxVelocity = 10;\n        this._fluidSim!.maxAcceleration = 2000;\n\n        this._shapeCollisionRestitution = 0.95;\n\n        this._particleGenerator!.position.x = 0.15;\n        this._particleGenerator!.position.y = 0.8;\n        this._particleGenerator!.position.z = -0.1;\n\n        // Create materials\n        this._boxMaterial = new BABYLON.PBRMaterial(\"BoxMeshMat\", this._scene);\n        this._boxMaterial.metallic = 0.3;\n        this._boxMaterial.roughness = 0;\n        this._boxMaterial.alpha = 0.2;\n        this._boxMaterial.backFaceCulling = false;\n\n        this._boxMesh!.material = this._boxMaterial;\n        this._cylMesh!.material = this._boxMaterial.clone(\"cloned\");\n        this._cylMesh!.material.alpha = 1;\n        this._footMesh!.material = this._cylMesh!.material;\n\n        this._sceneRenderObserver = this._scene.onBeforeRenderObservable.add(\n            () => {\n                this._cylMesh!.position.copyFrom(this._boxMesh!.position);\n                this._cylMesh!.position.addInPlace(this._cylMeshOfst);\n                this._footMesh!.position.copyFrom(this._boxMesh!.position);\n                this._footMesh!.position.addInPlace(this._footMeshOfst);\n            }\n        );\n\n        super._run();\n\n        await BABYLON.SceneLoader.AppendAsync(\"\", tableScene, this._scene);\n\n        const table = this._scene.getMeshByName(\"Object_3\")!;\n\n        table.scaling.setAll(6);\n        table.position.set(-2.3, -2, -5.54);\n    }\n\n    public dispose(): void {\n        super.dispose();\n\n        this._scene.onBeforeRenderObservable.remove(this._sceneRenderObserver);\n\n        this._scene.getMeshByName(\"__root__\")?.dispose(false, true);\n\n        this._boxMesh?.dispose();\n        this._boxMaterial?.dispose();\n        this._cylMesh?.material?.dispose();\n        this._cylMesh?.dispose();\n        this._footMesh?.dispose();\n    }\n\n    protected _makeGUIMainMenu(): void {\n        const params = {\n            restart: () => {\n                this._generateParticles();\n            },\n            boxOpacity: this._boxMaterial!.alpha,\n        };\n\n        const mainMenu = this._gui!;\n\n        mainMenu.add(params, \"restart\").name(\"Restart\");\n\n        mainMenu\n            .add(params, \"boxOpacity\", 0, 1, 0.01)\n            .name(\"Glass opacity\")\n            .onChange((value: any) => {\n                this._boxMaterial!.alpha = value;\n            });\n    }\n}\n"],"names":["FluidSimulationDemoGlass","FluidSimulationDemoBase","constructor","scene","super","this","_environmentFile","_sceneRenderObserver","_boxMesh","_boxMaterial","_cylMesh","_footMesh","addCollisionVerticalCylinder","addCollisionPlane","addCollisionCutHollowSphere","_footMeshOfst","_cylMeshOfst","async","_collisionObjects","camera","_scene","activeCameras","activeCamera","alpha","beta","radius","_fluidRenderObject","object","particleSize","targetRenderer","fluidColor","_fluidSim","smoothingRadius","densityReference","pressureConstant","viscosity","maxVelocity","maxAcceleration","_shapeCollisionRestitution","_particleGenerator","position","x","y","z","metallic","roughness","backFaceCulling","material","clone","onBeforeRenderObservable","add","copyFrom","addInPlace","_run","table","getMeshByName","scaling","setAll","set","dispose","remove","_makeGUIMainMenu","params","restart","_generateParticles","boxOpacity","mainMenu","_gui","name","onChange","value"],"sourceRoot":""}