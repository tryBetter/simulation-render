{"version":3,"file":"365.e97cb339907dfd969aa4.js","mappings":"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","sources":["webpack://babylonjs-fluid-rendering/./src/assets/scenes/scene_b.glb","webpack://babylonjs-fluid-rendering/./src/scenes/fluidSimulationDemoBoxSphere.ts"],"sourcesContent":["export default __webpack_public_path__ + \"3a7e30d32bdbb158c31616b73b274b90.glb\";","import * as BABYLON from \"@babylonjs/core\";\n\nimport * as LiLGUI from \"lil-gui\";\n\nimport { FluidSimulationDemoBase } from \"./fluidSimulationDemoBase\";\nimport { ICollisionShape } from \"./Utils/sdfHelper\";\nimport myBox from \"../assets/scenes/scene_b.glb\";\nexport class FluidSimulationDemoBoxSphere extends FluidSimulationDemoBase {\n    private _checkXZBounds: boolean;\n    private _sphereMesh: BABYLON.Nullable<BABYLON.Mesh> = null;\n    private _boxMin: BABYLON.Vector3;\n    private _boxMax: BABYLON.Vector3;\n    private _boxMesh: BABYLON.Nullable<BABYLON.Mesh>;\n    private _boxMaterial: BABYLON.Nullable<BABYLON.PBRMaterial>;\n    private _boxMeshFront: BABYLON.Nullable<BABYLON.Mesh>;\n    private _boxMaterialFront: BABYLON.Nullable<BABYLON.PBRMaterial>;\n    private _origCollisionPlanes: Array<BABYLON.Plane>;\n    private _collisionPlanes: Array<\n        [BABYLON.Nullable<BABYLON.Mesh>, ICollisionShape]\n    >;\n    private _angleX: number;\n    private _angleY: number;\n    private _prevTransfo: BABYLON.Matrix;\n    private _autoRotateBox: boolean;\n    private _wallMesh: BABYLON.Nullable<BABYLON.Mesh> = null;\n    // private _passPP: BABYLON.PostProcess;\n    private _sceneRenderObserver: BABYLON.Nullable<\n        BABYLON.Observer<BABYLON.Scene>\n    >;\n    private _sceneAfterCameraRenderObserver: BABYLON.Nullable<\n        BABYLON.Observer<BABYLON.Camera>\n    >;\n    private _sceneKeyboardObserver: BABYLON.Nullable<\n        BABYLON.Observer<BABYLON.KeyboardInfo>\n    >;\n    private _onEngineResizeObserver: BABYLON.Nullable<\n        BABYLON.Observer<BABYLON.Engine>\n    >;\n    private _customRootMesh :BABYLON.Nullable<BABYLON.Mesh> = null;\n    private _globalScale = 0.85;\n\n    constructor(scene: BABYLON.Scene) {\n        super(scene);\n\n        const halfSize = 0.35 * this._globalScale;\n        this._boxMin = new BABYLON.Vector3(-halfSize, -halfSize, -halfSize);\n        this._boxMax = new BABYLON.Vector3(halfSize, halfSize, halfSize);\n        this._boxMesh = null;\n        this._boxMaterial = null;\n        this._boxMeshFront = null;\n        this._boxMaterialFront = null;\n\n        this._checkXZBounds = true;\n        this._origCollisionPlanes = [\n            new BABYLON.Plane(0, 0, -1, Math.abs(this._boxMax.z)),\n            new BABYLON.Plane(0, 0, 1, Math.abs(this._boxMin.z)),\n            new BABYLON.Plane(1, 0, 0, Math.abs(this._boxMin.x)),\n            new BABYLON.Plane(-1, 0, 0, Math.abs(this._boxMax.x)),\n            new BABYLON.Plane(0, -1, 0, Math.abs(this._boxMax.y)),\n            new BABYLON.Plane(0, 1, 0, Math.abs(this._boxMin.y)),\n            new BABYLON.Plane(0, 1, 0, Math.abs(this._boxMin.y)),\n        ];\n        this._collisionPlanes = [];\n        for (let i = 0; i < this._origCollisionPlanes.length; ++i) {\n            const plane = this._origCollisionPlanes[i];\n            this.addCollisionPlane(\n                plane.normal,\n                plane.d,\n                i === this._origCollisionPlanes.length - 1 ? 0.98 : undefined\n            );\n        }\n\n        this._angleX = 0;\n        this._angleY = 0;\n        this._prevTransfo = BABYLON.Matrix.Identity();\n        this._autoRotateBox = false;\n\n        this._sceneRenderObserver = null;\n        this._sceneAfterCameraRenderObserver = null;\n        this._sceneKeyboardObserver = null;\n        this._onEngineResizeObserver = null;\n\n        // this._passPP = new BABYLON.PassPostProcess(\n        //     \"pass\",\n        //     1,\n        //     null,\n        //     undefined,\n        //     this._engine\n        // );\n        // this._passPP.externalTextureSamplerBinding = true;\n\n        this.loadCustomModel();\n        this._setCustomDebugLayer();\n        this._initMyPostProcessPipeline();\n    }\n\n    private _initMyPostProcessPipeline() {\n        const defaultPPLine = new BABYLON.DefaultRenderingPipeline(\n            \"defaultPipeline\", // The name of the pipeline\n            true, // Do you want the pipeline to use HDR texture?\n            this._scene, // The scene instance\n            [this._scene.activeCamera!] // The list of cameras to be attached to\n        );\n        defaultPPLine.samples = 2;\n        defaultPPLine.depthOfFieldEnabled = true;\n        defaultPPLine.depthOfField.focalLength = 246.4;\n        defaultPPLine.depthOfField.fStop = 32;\n        defaultPPLine.depthOfField.focusDistance = 1000;\n        defaultPPLine.depthOfField.lensSize = 6;\n\n        defaultPPLine.fxaaEnabled = true;\n        defaultPPLine.fxaa.samples = 4;\n        defaultPPLine.imageProcessingEnabled = true;\n        defaultPPLine.imageProcessing.contrast = 1.8;\n        defaultPPLine.imageProcessing.exposure = 2.2;\n        defaultPPLine.imageProcessing.toneMappingEnabled = false;\n        defaultPPLine.imageProcessing.toneMappingType = BABYLON.ImageProcessingConfiguration.TONEMAPPING_ACES;\n        defaultPPLine.glowLayerEnabled = true;\n        if (defaultPPLine.glowLayer) {\n            defaultPPLine.glowLayer.blurKernelSize = 16;\n            defaultPPLine.glowLayer.intensity = 1.0;\n        }\n        // defaultPPLine.grainEnabled = true;\n        // defaultPPLine.grain.animated = true;\n        // defaultPPLine.grain.intensity = 8.2;\n        defaultPPLine.bloomEnabled = true;\n    }\n\n    _setCustomDebugLayer() {\n        type di = {\n            [key: string]: boolean\n          }\n          const debugKeyInfo: di = {\n            'Shift': false,\n            'D': false\n          }\n          this._scene.onKeyboardObservable.add((kbInfo) => {\n            switch (kbInfo.type) {\n              case BABYLON.KeyboardEventTypes.KEYDOWN:\n                debugKeyInfo[kbInfo.event.key] = true\n                break;\n              case BABYLON.KeyboardEventTypes.KEYUP:\n                debugKeyInfo[kbInfo.event.key] = false\n                break;\n            }\n            if (debugKeyInfo['Shift'] && debugKeyInfo['D']) {\n              this._scene.debugLayer.isVisible() ? this._scene.debugLayer.hide() : this._scene.debugLayer.show({\n                overlay: true\n              })\n            }\n          });\n    }\n\n    loadCustomModel() {\n        let boolBox: BABYLON.Mesh | undefined = undefined;\n        let water: BABYLON.Mesh | undefined = undefined;\n        let waterWave: BABYLON.Mesh | undefined = undefined;\n        BABYLON.SceneLoader.AppendAsync(\"\", myBox, this._scene).then((importResult) => {\n            // const eu = new BABYLON.Vector3(0, 0,20 / 180 * Math.PI)\n            // eu.reorderInPlace(\"YXZ\")\n            // importResult.meshes[0].rotateAround(BABYLON.Vector3.Zero(), BABYLON.Vector3.Right(), 0 / 180 * Math.PI)\n            this._customRootMesh = importResult.getMeshByName(\"__root__\") as BABYLON.Mesh;\n            const scaleMesh = 0.1 * this._globalScale;\n            this._customRootMesh?.scaling.set(scaleMesh,scaleMesh,scaleMesh)\n      \n            const lightConfig = [\n              {\n                intensity: 0,\n                diffuseColor: BABYLON.Color3.FromInts(0.686 * 255, 255, 0.275 * 255),\n                specularColor: BABYLON.Color3.FromInts(0, 0.871 * 255, 255),\n                position: new BABYLON.Vector3(0, 0, -6.294),\n              },\n              {\n                intensity: 0,\n                diffuseColor: BABYLON.Color3.FromInts(0, 0.863 * 255, 255),\n                specularColor: BABYLON.Color3.FromInts(0, 255, 0.678 * 255),\n                position: new BABYLON.Vector3(0.178, -0.037, 6.285),\n              }\n            ]\n            let lightNode: BABYLON.TransformNode|undefined = undefined;\n            importResult.lights.forEach((light, index) => {\n              const pLight = light as BABYLON.PointLight;\n              if (lightNode === undefined) {\n                lightNode = pLight.parent as BABYLON.TransformNode;\n                lightNode.position.set(0, 0, 0);\n              }\n              lightNode.position.set(0,0,0);\n              pLight.parent = lightNode;\n              pLight.position.copyFrom(lightConfig[index].position);\n              pLight.intensity = lightConfig[index].intensity;\n              pLight.diffuse.copyFrom(lightConfig[index].diffuseColor);\n              pLight.specular.copyFrom(lightConfig[index].specularColor);\n            })\n      \n            this._scene.registerBeforeRender(() => {\n              if (lightNode !== undefined) {\n                lightNode.rotationQuaternion = null\n                lightNode.rotation.y = ((this._scene.activeCameras?.[0] ?? this._scene.activeCamera) as any)!.alpha + Math.PI;\n              }\n            });\n      \n            // const probe = new ReflectionProbe(\"boxReflection\", 512, scene);\n      \n            const renderList: any[] = []\n            importResult.meshes.forEach((mesh)=> {\n              if (mesh && mesh.name && mesh.material) {\n            //   (mesh.material as BABYLON.PBRMaterial).maxSimultaneousLights = 8\n              switch (mesh.name) {\n                case \"立方体.006_Baked\":\n                  mesh.material.alpha = 0.4\n                  mesh.alphaIndex = 4;\n                  mesh.material.transparencyMode = BABYLON.Material.MATERIAL_ALPHABLEND\n                  mesh.material.alphaMode = BABYLON.Engine.ALPHA_COMBINE;\n                  // eslint-disable-next-line no-case-declarations\n                  const boxMat: BABYLON.PBRMaterial = (mesh.material as BABYLON.PBRMaterial);\n                  boxMat.metallic = 1;\n                  boxMat.roughness = 0.2;\n                  boxMat.albedoColor.r = 0.50;\n                  boxMat.albedoColor.g = 0.04;\n                  boxMat.albedoColor.b = 1.0;\n                  boxMat.metallicReflectanceColor.r = 0.97;\n                  boxMat.metallicReflectanceColor.g = 0.029;\n                  boxMat.metallicReflectanceColor.b = 1.0;\n                  boxMat.anisotropy.isEnabled = true;\n                  boxMat.anisotropy.intensity = 0.8;\n                  boxMat.sheen.isEnabled = true;\n                  boxMat.sheen.intensity = 1.0;\n                  boxMat.sheen.color.r = 0.816;\n                  boxMat.sheen.color.g = 0.006;\n                  boxMat.sheen.color.b = 1.0;\n                  boxMat.sheen.useRoughnessFromMainTexture = true;\n                  boxMat.subSurface.tintColor.r = 0.541;\n                  boxMat.subSurface.tintColor.g = 0.933;\n                  boxMat.subSurface.tintColor.b = 1.0;\n                  boxMat.subSurface.isScatteringEnabled = true;\n                  boxMat.subSurface.isTranslucencyEnabled = true;\n                  boxMat.disableDepthWrite = true\n      \n                  break;\n                case \"布尔\":\n                  mesh.visibility = 0\n                  boolBox = mesh as BABYLON.Mesh;\n                  break;\n                case \"柱体.001_Baked\":\n                  mesh.visibility = 0\n                  break;\n                case \"平面_primitive0\":\n                  mesh.visibility = 0\n                  water = mesh as BABYLON.Mesh;\n                  break;\n                case \"平面_primitive1\":\n                  mesh.visibility = 0\n                  waterWave = mesh as BABYLON.Mesh;\n                  break;\n                case \"边线_Baked\":\n                  mesh.visibility = 0\n                  break;\n                case \"立方体.011_Baked\":\n                  renderList.push(mesh)\n                  mesh.alphaIndex = 3\n                  // mesh.material.disableDepthWrite = true;\n                  mesh.material.alpha = 0.6\n                  mesh.material.transparencyMode = BABYLON.Material.MATERIAL_ALPHABLEND;\n                  mesh.material.alphaMode = BABYLON.Engine.ALPHA_COMBINE;\n                  // (mesh.material as PBRMaterial).emissiveColor = Color3.FromInts(0.141,0, 0.482);\n                  (mesh.material as BABYLON.PBRMaterial).emissiveColor = BABYLON.Color3.FromInts(3.4,0, 51);\n                  (mesh.material as BABYLON.PBRMaterial).metallic = 1.0;\n                  (mesh.material as BABYLON.PBRMaterial).roughness = 0.0;\n                  break;\n                case \"立方体.013_Baked\":\n                  renderList.push(mesh)\n                  mesh.alphaIndex = 3\n                  // mesh.material.disableDepthWrite = true;\n                  mesh.material.alpha = 0.4\n                  mesh.material.transparencyMode = BABYLON.Material.MATERIAL_ALPHABLEND;\n                  mesh.material.alphaMode = BABYLON.Engine.ALPHA_COMBINE;\n                  (mesh.material as BABYLON.PBRMaterial).emissiveColor = BABYLON.Color3.FromInts(12.6,0, 148);\n                  (mesh.material as BABYLON.PBRMaterial).metallic = 0.93;\n                  (mesh.material as BABYLON.PBRMaterial).roughness = 0.0;\n                  break;\n                case \"立方体.012_Baked\":\n                case \"立方体.014_Baked\":\n                  renderList.push(mesh)\n                  mesh.alphaIndex = 3\n                  mesh.material.alpha = 0.26\n                  mesh.material.transparencyMode = BABYLON.Material.MATERIAL_ALPHABLEND\n                  mesh.material.alphaMode = BABYLON.Engine.ALPHA_ADD;\n                  (mesh.material as BABYLON.PBRMaterial).emissiveColor = BABYLON.Color3.FromInts(0.059,0.161, 1.0);\n                  (mesh.material as BABYLON.PBRMaterial).metallic = 1.0;\n                  (mesh.material as BABYLON.PBRMaterial).roughness = 0.15;\n                  break;\n                case \"Cylinder\":\n                  break;\n                default:\n                  break;\n              }\n              }\n            })\n          })\n    }\n\n    protected async _run() {\n        // Get collision meshes\n        for (let i = 0; i < this._origCollisionPlanes.length; ++i) {\n            this._collisionPlanes.push(this._collisionObjects[i]);\n        }\n\n        this._collisionPlanes[this._collisionPlanes.length - 1][1].disabled = true;\n\n        // Reset camera\n        const camera = this._scene.activeCameras?.[0] ?? this._scene.activeCamera;\n        \n        const tempScene = new BABYLON.Scene(this._scene.getEngine());\n        const tempCamera = new BABYLON.ArcRotateCamera(\"camera\", 14.33, 1.594, this._globalScale, BABYLON.Vector3.Zero(), tempScene);\n        tempCamera.lowerRadiusLimit = this._globalScale;\n        tempCamera.upperRadiusLimit = this._globalScale;\n        tempCamera.useAutoRotationBehavior = true;\n        tempCamera.attachControl(document.getElementById(\"renderCanvas\"), true);\n        tempScene.attachControl(true,true,true);\n        tempScene.clearColor = new BABYLON.Color4(0, 0, 0, 0);\n        tempScene.autoClear = false\n\n        this._scene.onAfterCameraRenderObservable.add(() => {\n            tempScene.render()\n            if (this._customRootMesh) {\n                this._customRootMesh.rotationQuaternion = tempCamera.absoluteRotation;\n                this._rotateMeshes(-tempCamera.alpha, -tempCamera.beta);\n            }\n        })\n\n        if (camera) {\n            (camera as BABYLON.ArcRotateCamera).alpha = 1;\n            (camera as BABYLON.ArcRotateCamera).beta = 1.1;\n            (camera as BABYLON.ArcRotateCamera).radius = 1.9;\n            (camera as BABYLON.ArcRotateCamera).panningSensibility = 0;\n            (camera as BABYLON.ArcRotateCamera).lowerAlphaLimit = 1;\n            (camera as BABYLON.ArcRotateCamera).upperAlphaLimit = 1;\n            (camera as BABYLON.ArcRotateCamera).lowerBetaLimit = 1.1;\n            (camera as BABYLON.ArcRotateCamera).upperBetaLimit = 1.1;\n            (camera as BABYLON.ArcRotateCamera).lowerRadiusLimit = 1.9 * this._globalScale;\n            (camera as BABYLON.ArcRotateCamera).upperRadiusLimit = 1.9 * this._globalScale;\n\n            // camera.outputRenderTarget = new BABYLON.RenderTargetTexture(\n            //     \"rttFinal\",\n            //     {\n            //         width: this._engine.getRenderWidth(),\n            //         height: this._engine.getRenderHeight(),\n            //     },\n            //     this._scene\n            // );\n        }\n\n        // Simulation parameters\n        this._fluidRenderObject.object.particleSize = 0.03;\n        this._fluidRenderObject.object.particleThicknessAlpha = 0.017;\n\n        this._fluidSim!.smoothingRadius = 0.05;\n        this._fluidSim!.densityReference = 37100;\n        this._fluidSim!.pressureConstant = 3;\n        this._fluidSim!.viscosity = 0.01;\n        this._fluidSim!.maxVelocity = 6;\n        this._fluidSim!.maxAcceleration = 48000;\n\n        // Create materials\n        // this._boxMaterial = new BABYLON.PBRMaterial(\"BoxMeshMat\", this._scene);\n        // this._boxMaterial.metallic = 0.3;\n        // this._boxMaterial.roughness = 0;\n        // this._boxMaterial.alpha = 0.0;\n        // this._boxMaterial.backFaceCulling = true;\n        // this._boxMaterial.cullBackFaces = false;\n\n        // this._boxMaterialFront = this._boxMaterial.clone(\"BoxMeshFrontMat\");\n        // this._boxMaterialFront.cullBackFaces = true;\n\n        // Create meshes\n        // this._boxMesh = BABYLON.MeshBuilder.CreateBox(\n        //     \"boxMesh\",\n        //     {\n        //         width: this._boxMax.x - this._boxMin.x,\n        //         height: this._boxMax.y - this._boxMin.y,\n        //         depth: this._boxMax.z - this._boxMin.z,\n        //     },\n        //     this._scene\n        // );\n        // this._boxMesh.material = this._boxMaterial;\n        // this._boxMesh.position.x = (this._boxMin.x + this._boxMax.x) / 2;\n        // this._boxMesh.position.y = (this._boxMin.y + this._boxMax.y) / 2;\n        // this._boxMesh.position.z = (this._boxMin.z + this._boxMax.z) / 2;\n        // this._boxMesh.isPickable = false;\n\n        // this._boxMeshFront = this._boxMesh.clone(\"boxMeshFront\");\n        // this._boxMeshFront.material = this._boxMaterialFront;\n        // this._boxMeshFront.layerMask = 0x10000000; // make sure the mesh is not displayed by the camera - we will display it ourselves by a direct call to render()\n\n        // Render the front side of the box\n        // this._passPP.onApplyObservable.add((effect) => {\n        //     effect.setTexture(\"textureSampler\", camera!.outputRenderTarget);\n        // });\n\n        // let depthIsShared = false;\n        // this._sceneAfterCameraRenderObserver =\n        //     this._scene.onAfterCameraRenderObservable.add(() => {\n        //         const firstPP = camera?._getFirstPostProcess();\n        //         if (\n        //             firstPP &&\n        //             firstPP.inputTexture.depthStencilTexture &&\n        //             !depthIsShared\n        //         ) {\n        //             firstPP.inputTexture._shareDepth(\n        //                 camera!.outputRenderTarget!.renderTarget!\n        //             );\n        //             depthIsShared = true;\n        //         }\n        //         if (depthIsShared) {\n        //             this._boxMeshFront?.render(\n        //                 this._boxMeshFront.subMeshes[0],\n        //                 true\n        //             );\n        //             this._scene.postProcessManager.directRender(\n        //                 [this._passPP!],\n        //                 null\n        //             );\n        //         }\n        //     });\n\n        this._onEngineResizeObserver = this._engine.onResizeObservable.add(\n            () => {\n                camera?.outputRenderTarget?.resize({\n                    width: this._engine.getRenderWidth(true),\n                    height: this._engine.getRenderHeight(true),\n                });\n                // depthIsShared = false;\n            }\n        );\n\n        super._run();\n        setTimeout(() => {\n            document.getElementById(\"renderCanvas\")!.style.opacity = \"1.0\";\n        }, 800)\n    }\n\n    public dispose(): void {\n        super.dispose();\n\n        const camera =\n            this._scene.activeCameras?.[0] ?? this._scene.activeCamera;\n\n        if (camera) {\n            camera.outputRenderTarget?.dispose();\n            camera.outputRenderTarget = null;\n        }\n\n        this._scene.onBeforeRenderObservable.remove(this._sceneRenderObserver);\n        this._scene.onAfterCameraRenderObservable.remove(\n            this._sceneAfterCameraRenderObserver\n        );\n        this._scene.onKeyboardObservable.remove(this._sceneKeyboardObserver);\n\n        // this._passPP.dispose();\n        this._boxMesh?.dispose();\n        this._boxMeshFront?.dispose();\n        this._boxMaterial?.dispose();\n        this._engine.onResizeObservable.remove(this._onEngineResizeObserver);\n    }\n\n    protected _makeGUIMainMenu(): void {\n        const params = {\n            checkXZBounds: true,\n            autoRotateBox: false,\n            restart: () => {\n                this._angleX = this._angleY = 0;\n                this._autoRotateBox = false;\n                autoRotateBoxCtrl?.setValue(false);\n                this._rotateMeshes(0, 0);\n                this._generateParticles();\n            },\n            // boxOpacity: this._boxMaterial!.alpha,\n        };\n\n        const mainMenu = this._gui!;\n\n        let autoRotateBoxCtrl: BABYLON.Nullable<LiLGUI.Controller> = null;\n\n        mainMenu.add(params, \"restart\").name(\"Restart\");\n\n        mainMenu\n            .add(params, \"checkXZBounds\")\n            .name(\"Check box bounds\")\n            .onChange((value: boolean) => {\n                this._checkXZBounds = value;\n                this._boxMesh?.setEnabled(value);\n                this._boxMeshFront?.setEnabled(value);\n                for (let i = 0; i < this._collisionPlanes.length; ++i) {\n                    this._collisionPlanes[i][1].disabled =\n                        (!value && i < this._collisionPlanes.length - 1) ||\n                        (value && i === this._collisionPlanes.length - 1);\n                }\n                if (!value) {\n                    this._autoRotateBox = false;\n                    autoRotateBoxCtrl?.setValue(false);\n                }\n            });\n\n        autoRotateBoxCtrl = mainMenu\n            .add(params, \"autoRotateBox\")\n            .name(\"Auto rotate box\")\n            .onChange((value: boolean) => {\n                this._autoRotateBox = value;\n            });\n\n        // mainMenu\n        //     .add(params, \"boxOpacity\", 0, 1, 0.01)\n        //     .name(\"Box opacity\")\n        //     .onChange((value: any) => {\n        //         this._boxMaterial!.alpha = value;\n        //         this._boxMaterialFront!.alpha = value;\n        //     });\n    }\n\n    protected _onPaused(value: boolean) {\n        super._onPaused(value);\n\n        if (value) {\n            this._autoRotateBox = false;\n        }\n    }\n\n    protected _rotateMeshes(angleX: number, angleY: number): void {\n        const transfo = BABYLON.Matrix.RotationYawPitchRoll(\n            angleX,\n            0,\n            angleY,\n        );\n\n        const boxVertices = [\n            new BABYLON.Vector3(this._boxMin.x, this._boxMin.y, this._boxMin.z),\n            new BABYLON.Vector3(this._boxMin.x, this._boxMax.y, this._boxMin.z),\n            new BABYLON.Vector3(this._boxMin.x, this._boxMax.y, this._boxMax.z),\n            new BABYLON.Vector3(this._boxMin.x, this._boxMin.y, this._boxMax.z),\n            new BABYLON.Vector3(this._boxMax.x, this._boxMin.y, this._boxMin.z),\n            new BABYLON.Vector3(this._boxMax.x, this._boxMax.y, this._boxMin.z),\n            new BABYLON.Vector3(this._boxMax.x, this._boxMax.y, this._boxMax.z),\n            new BABYLON.Vector3(this._boxMax.x, this._boxMin.y, this._boxMax.z),\n        ];\n\n        let ymin = 1e10;\n        for (let i = 0; i < boxVertices.length; ++i) {\n            const v = BABYLON.Vector3.TransformCoordinates(\n                boxVertices[i],\n                transfo\n            );\n            ymin = Math.min(ymin, v.y);\n        }\n\n        this._collisionPlanes[\n            this._origCollisionPlanes.length - 1\n        ][1].params[1] = Math.abs(ymin) + 0.02;\n\n        for (let i = 0; i < this._origCollisionPlanes.length - 1; ++i) {\n            const plane = this._origCollisionPlanes[i].transform(transfo);\n            this._collisionPlanes[i][1].params = [plane.normal, plane.d];\n        }\n\n        const quat = BABYLON.Quaternion.FromRotationMatrix(transfo);\n\n        this._prevTransfo.invert();\n\n        if (this._sphereMesh) {\n            const tmp = BABYLON.Vector3.TransformCoordinates(\n                this._sphereMesh.position,\n                this._prevTransfo\n            );\n\n            this._sphereMesh.rotationQuaternion = quat;\n            this._sphereMesh.position = BABYLON.Vector3.TransformCoordinates(\n                tmp,\n                transfo\n            );\n        }\n\n        if (this._wallMesh) {\n            const tmp = BABYLON.Vector3.TransformCoordinates(\n                this._wallMesh.position,\n                this._prevTransfo\n            );\n\n            const m = BABYLON.Matrix.RotationYawPitchRoll(\n                0,\n                (90 * Math.PI) / 180,\n                0\n            );\n            const t = BABYLON.Matrix.Translation(tmp.x, tmp.y, tmp.z);\n\n            m.multiplyToRef(t, m).multiplyToRef(transfo, m);\n            const qf =\n                this._wallMesh.rotationQuaternion ?? new BABYLON.Quaternion();\n\n            m.decompose(undefined, qf, this._wallMesh.position);\n\n            this._wallMesh.rotationQuaternion = qf;\n        }\n\n        if (this._boxMesh && this._boxMeshFront) {\n            this._boxMesh.rotationQuaternion =\n                this._boxMeshFront.rotationQuaternion = quat;\n            this._boxMesh.position.x = (this._boxMin.x + this._boxMax.x) / 2;\n            this._boxMesh.position.y = (this._boxMin.y + this._boxMax.y) / 2;\n            this._boxMesh.position.z = (this._boxMin.z + this._boxMax.z) / 2;\n            this._boxMesh.position = BABYLON.Vector3.TransformCoordinates(\n                this._boxMesh.position,\n                transfo\n            );\n            this._boxMeshFront.position = this._boxMesh.position;\n        }\n\n        this._prevTransfo.copyFrom(transfo);\n    }\n}\n"],"names":["FluidSimulationDemoBoxSphere","FluidSimulationDemoBase","constructor","scene","super","_sphereMesh","_wallMesh","_customRootMesh","_globalScale","halfSize","this","_boxMin","_boxMax","_boxMesh","_boxMaterial","_boxMeshFront","_boxMaterialFront","_checkXZBounds","_origCollisionPlanes","Math","abs","z","x","y","_collisionPlanes","i","length","plane","addCollisionPlane","normal","d","undefined","_angleX","_angleY","_prevTransfo","_autoRotateBox","_sceneRenderObserver","_sceneAfterCameraRenderObserver","_sceneKeyboardObserver","_onEngineResizeObserver","loadCustomModel","_setCustomDebugLayer","_initMyPostProcessPipeline","defaultPPLine","_scene","activeCamera","samples","depthOfFieldEnabled","depthOfField","focalLength","fStop","focusDistance","lensSize","fxaaEnabled","fxaa","imageProcessingEnabled","imageProcessing","contrast","exposure","toneMappingEnabled","toneMappingType","glowLayerEnabled","glowLayer","blurKernelSize","intensity","bloomEnabled","debugKeyInfo","onKeyboardObservable","add","kbInfo","type","event","key","debugLayer","isVisible","hide","show","overlay","boolBox","water","waterWave","then","importResult","getMeshByName","scaleMesh","scaling","set","lightConfig","diffuseColor","specularColor","position","lightNode","lights","forEach","light","index","pLight","parent","copyFrom","diffuse","specular","registerBeforeRender","rotationQuaternion","rotation","activeCameras","alpha","PI","renderList","meshes","mesh","name","material","alphaIndex","transparencyMode","alphaMode","boxMat","metallic","roughness","albedoColor","r","g","b","metallicReflectanceColor","anisotropy","isEnabled","sheen","color","useRoughnessFromMainTexture","subSurface","tintColor","isScatteringEnabled","isTranslucencyEnabled","disableDepthWrite","visibility","push","emissiveColor","async","_collisionObjects","disabled","camera","tempScene","getEngine","tempCamera","lowerRadiusLimit","upperRadiusLimit","useAutoRotationBehavior","attachControl","document","getElementById","clearColor","autoClear","onAfterCameraRenderObservable","render","absoluteRotation","_rotateMeshes","beta","radius","panningSensibility","lowerAlphaLimit","upperAlphaLimit","lowerBetaLimit","upperBetaLimit","_fluidRenderObject","object","particleSize","particleThicknessAlpha","_fluidSim","smoothingRadius","densityReference","pressureConstant","viscosity","maxVelocity","maxAcceleration","_engine","onResizeObservable","outputRenderTarget","resize","width","getRenderWidth","height","getRenderHeight","_run","setTimeout","style","opacity","dispose","onBeforeRenderObservable","remove","_makeGUIMainMenu","params","checkXZBounds","autoRotateBox","restart","autoRotateBoxCtrl","setValue","_generateParticles","mainMenu","_gui","onChange","value","setEnabled","_onPaused","angleX","angleY","transfo","boxVertices","ymin","v","min","transform","quat","invert","tmp","m","t","multiplyToRef","qf","decompose"],"sourceRoot":""}